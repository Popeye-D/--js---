<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>表单提交</title>
    <link rel="stylesheet"  href="./style.css">
</head>

<body>
    <div id="page"></div>

    <script src=""></script>
    <script>
        function yanzhen() {
            var x = document.forms["queryForm"]["DBType"].value;
            if (x == null || x == "") {
                alert("该值不能为空！");
                return false;
            }
        }

        
        function funSu(relust){
            this.dataDbtype=relust;

        }
        function Ajax(url,funSu) {
           
            var ajaxObj = new XMLHttpRequest();
            var responseData;
    
            ajaxObj.open('get', url,true);

            ajaxObj.send();

            ajaxObj.onreadystatechange = function () {
                
                if (ajaxObj.readyState == 4 && ajaxObj.status == 200) {
                   
                   funSu(ajaxObj.responseText);
                    
                }
            }
           

        }
        // var get = 
        var dataDbtype = new Ajax('./data/dataDbtype.json',funSu);
        var dataDbid = [{ option: "o1", opid: "01" }, { option: "r1", opid: "02" }, { option: "mo1", opid: "03" }, { option: "my1", opid: "04" }];
        var dataDbid2 = [{ option: "o2", opid: "01" }, { option: "r2", opid: "02" }, { option: "mo2", opid: "03" }, { option: "my2", opid: "04" }];
        var dataDbyname = [{ option: "sad", opid: "01" }, { option: "rasd", opid: "02" }, { option: "mdsao", opid: "03" }, { option: "mdasy", opid: "04" }];
        var dataDbyname2 = [{ option: "sad", opid: "01" }, { option: "rasd", opid: "02" }, { option: "mdsao", opid: "03" }, { option: "mdasy", opid: "04" }];
        var dataYjzb = [{ option: "etl1", opid: "01" }, { option: "etl2", opid: "02" }, { option: "etl3", opid: "03" }, { option: "etl4", opid: "04" }];
        var dataMsg = [{ option: "etl5", opid: "01" }, { option: "etl6", opid: "02" }, { option: "etl7", opid: "03" }];
        var dataSfyj = [];
        var page = document.getElementById("page");
        //    var fragment= document.createDocumentFragment();
        //    page.appendChild(fragment)
        var addPanel = document.createElement("div");
        var listPanel = document.createElement("div");
        var form = document.createElement("form");
        var addtab = document.createElement("table");
        var listtab = document.createElement("table");
        addPanel.setAttribute("id", "formInfo");
        listPanel.setAttribute("id", "tableInfo");
        page.appendChild(addPanel);
        page.appendChild(listPanel);
        addPanel.appendChild(form);
        listPanel.appendChild(listtab);
        form.appendChild(addtab);
        form.setAttribute("name", "queryForm");
        form.setAttribute("class", "querForm");
        form.setAttribute("method", "post");
        form.setAttribute("action", "data.json");
        //addpanel
        function createInput(labelName, name, store, type) {
            var tr = document.createElement("tr");
            addtab.appendChild(tr);
            var indiv = document.createElement("div");
            tr.appendChild(indiv);
            var label = document.createElement("label");
            indiv.appendChild(label);
            label.innerHTML = labelName + "<b style='color:red'>*</b>";
            var inputModel = document.createElement(type);
            inputModel.setAttribute("type", type)
            indiv.appendChild(inputModel);
            inputModel.setAttribute("name", name);
            if (store !== null) {
                for (var i = 0; i < store.length; i++) {
                    var op = document.createElement("option");
                    op.innerText = store[i].option;
                    inputModel.appendChild(op);
                }
            }
        }

        createInput("数据库类型", "dbtype", dataDbtype, "select");
        createInput("数据库名称", "dbid", dataDbid, "select");
        createInput("数据源名称", "dbyname", dataDbyname, "select");
        createInput("预警指标", "yjzb", dataYjzb, "select");
        createInput("时间监控策略", "sjjkcl", dataDbyname, "input");
        createInput("短信接收人", "msgper", dataMsg, "select");
        createInput("是否预警", "sfyj", dataSfyj, "checkbox")

        var save = document.createElement("input");

        save.setAttribute("type", "submit");
        save.setAttribute("value", "保存");
        save.setAttribute("id", "saveBtn");
        form.appendChild(save);
        //listPanel

        var thead = document.createElement("thead");
        var tbody = document.createElement("tbody");
        listtab.appendChild(thead);
        listtab.appendChild(tbody);
        tbody.setAttribute("id", "tbMain");
        var tr1 = document.createElement("tr");
        thead.appendChild(tr1);

        function createCloum(label, Name) {
            var th = document.createElement("th");
            th.innerText = label;
            tr1.appendChild(th)
        }
        createCloum("序号", "xh");
        createCloum("数据库名称", "dbid");
        createCloum("预警指标", "yjzb");
        createCloum("监控时间策略", "jksjcl");
        createCloum("是否预警", "sfyj");
        createCloum("操作", "xh");
        
        function Cloum(label,name){
            this.label = label;
            this.name = name;
       
        this.render=function(){
                var th = document.createElement("th");
                th.innerText = this.label;
                tr1.appendChild(th);
            }
        }
        new Cloum("xuhao","xh").render();


        // cloum(name,lable,render());
        // new cloum(name,lable).render();




        var dataCloum = [{ xh: "1", dbid: "db1", yjzb: "etl", jksjcl: "1m1c", sfyj: "shi" }, { xh: "2", dbid: "db2", yjzb: "etl", jksjcl: "1m1c", sfyj: "shi" }, { xh: "3", dbid: "db3", yjzb: "etl", jksjcl: "1m1c", sfyj: "shi" }];


        window.onload = function () {
            var tbody = document.getElementById('tbMain');

            for (var i = 0; i < dataCloum.length; i++) {
                var trow = getDataRow(dataCloum[i]);
                tbody.appendChild(trow);
            }

        }

        function getDataRow(h) {
            var row = document.createElement('tr');

            var xhCell = document.createElement('td');
            xhCell.innerHTML = h.xh;
            row.appendChild(xhCell);

            var nameCell = document.createElement('td');
            nameCell.innerHTML = h.dbid;
            row.appendChild(nameCell);

            var yjzbCell = document.createElement('td');
            yjzbCell.innerHTML = h.yjzb;
            row.appendChild(yjzbCell);

            var timeCell = document.createElement('td');
            timeCell.innerHTML = h.jksjcl;
            row.appendChild(timeCell);

            var sfyjCell = document.createElement('td');
            sfyjCell.innerHTML = h.sfyj;
            row.appendChild(sfyjCell);

            var ediCell = document.createElement('td');
            row.appendChild(ediCell);
            var btnEdi = document.createElement('input');
            btnEdi.setAttribute('type', 'button');
            btnEdi.setAttribute('value', '修改');


            //    btnEdi.οnclick=function(){  
            // 	     
            // 	   }  
            ediCell.appendChild(btnEdi);

            return row; //返回tr数据      
        }      
    </script>
</body>

</html>